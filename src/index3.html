<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">

    <script src="js/three.min.js"></script>
    <script src="js/Three.js"></script>

    <title></title>

    <script>
        /*function loadjscssfile(filename, filetype){
            if (filetype=="js"){ //if filename is a external JavaScript file
                var fileref=document.createElement('script')
                fileref.setAttribute("type","text/javascript")
                fileref.setAttribute("src", filename)
            }
            else if (filetype=="css"){ //if filename is an external CSS file
                var fileref=document.createElement("link")
                fileref.setAttribute("rel", "stylesheet")
                fileref.setAttribute("type", "text/css")
                fileref.setAttribute("href", filename)
            }
            if (typeof fileref!="undefined")
                document.getElementsByTagName("head")[0].appendChild(fileref)
        }

        loadjscssfile("js/Three.js", "js")*/

    </script>

</head>

<body>
<div id="container"></div>
<script>
    var scene, renderer, texture;
    var camera, cameraControl;
    var accel = 0.008; //0.008
    var cameraOffsetY = 0.5;



    function init(){
        renderer = new THREE.WebGLRenderer({
            antialias: true,
            alpha: false
        });

        renderer.setClearColor( 0xff0000, 1 );

        renderer.setSize( window.innerWidth, window.innerHeight );
        document.getElementById('container').appendChild(renderer.domElement);


        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 1, 1000 );
//        camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 100);
        camera.position.z = 700;

//        camera.lookAt(scene.position);
//        scene.add(camera);

        /*var light	= new THREE.DirectionalLight( 0xff8000, 1.5 );
        light.position.set( 1, 1, 0 ).normalize();
        scene.add( light );

        var light	= new THREE.DirectionalLight( 0xff8000, 1.5 );
        light.position.set( -1, 1, 0 ).normalize();
        scene.add( light );

        var light	= new THREE.PointLight( 0x44FFAA, 15, 25 );
        light.position.set( 0, -3, 0 );
        scene.add( light );

        var light	= new THREE.PointLight( 0xff4400, 20, 30 );
        light.position.set( 3, 3, 0 );
        scene.add( light );

        scene.fog	= new THREE.FogExp2( 0x000000, 0.15 );*/

//        var geometry	= new THREE.CylinderGeometry( 100, 100, 400, 50, 50, true );
//        texture		= THREE.ImageUtils.loadTexture( "images/ash_uvgrid01.jpg" );



//        texture.wrapT	= THREE.RepeatWrapping;

//        console.log(texture);


        var material = new THREE.MeshLambertMaterial({
            map: THREE.ImageUtils.loadTexture( 'images/ash_uvgrid01.jpg')
        });

//        var material	= new THREE.MeshLambertMaterial({color : 0xFFFFFF, map : texture});
//        var mesh	= new THREE.Mesh( geometry, material );
//        mesh.rotation.x	= Math.PI/2;
//        scene.add( mesh );

//        console.log(mesh);

//         mesh.flipSided	= true;


        // cylinder
        // API: THREE.CylinderGeometry(bottomRadius, topRadius, height, segmentsRadius, segmentsHeight)
        var cylinder = new THREE.Mesh(new THREE.CylinderGeometry(100, 100, 400, 50, 50, false), material);
        cylinder.overdraw = true;
        scene.add(cylinder);


        animate();

    }


    function animate() {

        // move the texture to give the illusion of moving thru the tunnel
        texture.offset.y	+= 0.008; //control the speed of tunnel
        texture.offset.y	%= 1;
        texture.needsUpdate	= true;

        // move the camera back and forth
        var seconds		= Date.now() / 1000;
        var radius		= 0.70;
        var angle		= Math.sin(0.75 * seconds * Math.PI) / 4;
        //angle	= (seconds*Math.PI)/4;
        camera.position.x	= Math.cos(angle - Math.PI/2) * radius;
        camera.position.y	= Math.sin(angle - Math.PI/2) * radius + cameraOffsetY;
        camera.rotation.z	= angle;


        requestAnimationFrame( animate );
        renderer.render( scene, camera );
    }

    function onLoad() {
        init();
    }


    window.addEventListener('load',onLoad);

</script>



</body>
</html>